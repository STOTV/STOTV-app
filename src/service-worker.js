"use strict"
var CACHE_VERSION=1,CURRENT_CACHES={"read-through":"read-through-cache-v"+CACHE_VERSION}
self.addEventListener("activate",function(e){var t=Object.keys(CURRENT_CACHES).map(function(e){return CURRENT_CACHES[e]})
e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){return-1===t.indexOf(e)?(console.log("Deleting out of date cache:",e),caches["delete"](e)):void 0}))}))}),self.addEventListener("fetch",function(e){e.respondWith(caches.open(CURRENT_CACHES["read-through"]).then(function(t){return t.match(e.request).then(function(n){return n?n:(console.log(" No response for %s found in cache. About to fetch from network...",e.request.url),fetch(e.request.clone()).then(function(n){return n.status<400&&"basic"===n.type&&t.put(e.request,n.clone()),n}))})["catch"](function(e){throw console.error("  Read-through caching failed:",e),e})}))})
